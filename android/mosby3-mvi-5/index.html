<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Hannes Dorfmann</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Model-View-Intent MVI on Android by using Mosby 3. Focusing on Debugging and time traveling in MVI on Android.">
  <meta name="author" content="Hannes Dorfmann">
  <meta name="generator" content="Hugo 0.73.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://sockeqwe.github.io/pages/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://sockeqwe.github.io/pages/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://sockeqwe.github.io/pages/plugins/themify-icons/themify-icons.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://sockeqwe.github.io/pages/css/style.min.css" media="screen">

  <!-- Syntax highlightning Stylesheet -->
  
  <link rel="stylesheet" href="https://sockeqwe.github.io/pages/css/syntax-highlighting.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://sockeqwe.github.io/pages/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://sockeqwe.github.io/pages/images/favicon.png " type="image/x-icon">

  </head><body class="theme-light">
<!-- preloader start -->
<div class="preloader">
  <div class="loader">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- preloader end -->
<header class="navigation">
  <nav class="navbar navbar-expand-lg navbar-light">
    
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navogation"
      aria-controls="navogation" aria-expanded="false" aria-label="Toggle navigation">
      <span id="navbar-toggler" class="ti-menu"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navogation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://sockeqwe.github.io/pages/">Home</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://sockeqwe.github.io/pages/about">About</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://sockeqwe.github.io/pages/presentations">Presentations</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://sockeqwe.github.io/pages/contact">Contact</a>
        </li>
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" onclick="toggleTheme()">
            <img id="themeSwitcher" class="navbar-nav ml-lg-4" src="/images/theme/moon.svg"/>
          </a>
        </li>
      </ul>
      
      <!-- search -->
      <form class="form-inline position-relative ml-lg-4" action="https://sockeqwe.github.io/pages//search">
        <input class="form-control px-0 w-100" type="search" placeholder="Search" id="search-query" name="s">
        <button class="search-icon" type="submit"><i class="ti-search text-dark"></i></button>
      </form>
      
    </div>
  </nav>
</header>


<section class="section bg-secondary">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1>Reactive Apps with Model-View-Intent - Part 5: Debugging with ease</h1>
      </div>
    </div>
  </div>
</section>



<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <ul class="list-inline d-flex justify-content-between py-3">
          <li class="list-inline-item"><i class="ti-user mr-2"></i>Post by Hannes Dorfmann</li>
          <li class="list-inline-item"><i class="ti-calendar mr-2"></i>Mar 17, 2017</li>
        </ul>
        <article class="content">
          
          <p>In the previous blog posts we have discussed the Model-View-Intent (MVI) pattern and it&rsquo;s characteristics.
In <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-1/">part 1</a> we have talked about the importance of
an unidirectional data flow and application state that is driven by the &ldquo;business logic&rdquo;.
In this blog post we will see how this pays off when it comes to debugging to simplify the life of developers.</p>
<p>Have you ever got a crash report and you were not able to reproduce the bug? Sounds familiar?
For me too! After having spend many hours looking at the stacktrace and our source code I gave up and have closed such issues in our issue tracker with a little comment like &ldquo;can&rsquo;t reproduce it&rdquo; or &ldquo;must be a strange device / manufacturer specific bug&rdquo;.</p>
<p>Concrete example from our shopping cart app we have developed in this blog post series:
On the home screen the user of our app can do a pull-to-refresh and somehow,
as the crash reports states, there is a NullPointerException thrown while loading the newest data triggered by pull-to-refresh.</p>
<p>So you as developer start the app and do a pull-to-refresh on the home screen but the app is not crashing.
It&rsquo;s working as expected.
So you take a closer look at your code but you can&rsquo;t see how a NullPointerException could be thrown there.
You attach a debugger, go step by step through the code of the involved components, but still: it is working properly. How the hell can this app crash on a pull-to-refresh?</p>
<p>The problem is that you can&rsquo;t reproduce the state before the crash happened.
Wouldn&rsquo;t it be nice if the user who had the crash could give you his app state (before the crash happened) along with the stacktrace in the crash report?
With unidirectional data flow and Model-View-Intent this is super easy.
We simply log all intents the user triggers and the model (model reflects the app state, a.k.a. view state) that is rendered on the view.
Let&rsquo;s do that for the home screen by adding logs in the <strong>HomePresenter</strong> (for more details about this class see <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-3/">part 3</a> where we have discussed the advantages of a state reducer).
In the following code snippets we use <a href="https://fabric.io/kits/ios/crashlytics">Crashlytics</a> but it should be possible to do the same with any other crash reporting tool.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">HomePresenter</span> <span class="kd">extends</span> <span class="n">MviBasePresenter</span><span class="o">&lt;</span><span class="n">HomeView</span><span class="o">,</span> <span class="n">HomeViewState</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">HomeViewState</span> <span class="n">initialState</span><span class="o">;</span> <span class="c1">// Show loading indicator
</span><span class="c1"></span>
  <span class="kd">public</span> <span class="nf">HomePresenter</span><span class="o">(</span><span class="n">HomeViewState</span> <span class="n">initialState</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">initialState</span> <span class="o">=</span> <span class="n">initialState</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span> <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">bindIntents</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">Observable</span><span class="o">&lt;</span><span class="n">PartialState</span><span class="o">&gt;</span> <span class="n">loadFirstPage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">(</span><span class="n">HomeView</span><span class="o">::</span><span class="n">loadFirstPageIntent</span><span class="o">)</span>
          <span class="o">.</span><span class="na">doOnNext</span><span class="o">(</span><span class="n">intent</span> <span class="o">-&gt;</span> <span class="n">Crashlytics</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&#34;Intent: load first page&#34;</span><span class="o">))</span>
          <span class="o">.</span><span class="na">flatmap</span><span class="o">(...);</span> <span class="c1">// business logic calls to load data
</span><span class="c1"></span>
    <span class="n">Observable</span><span class="o">&lt;</span><span class="n">PartialState</span><span class="o">&gt;</span> <span class="n">pullToRefresh</span> <span class="o">=</span> <span class="n">intent</span><span class="o">(</span><span class="n">HomeView</span><span class="o">::</span><span class="n">pullToRefreshIntent</span><span class="o">)</span>
          <span class="o">.</span><span class="na">doOnNext</span><span class="o">(</span><span class="n">intent</span> <span class="o">-&gt;</span> <span class="n">Crashlytics</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&#34;Intent: pull-to-refresh&#34;</span><span class="o">))</span>
          <span class="o">.</span><span class="na">flatmap</span><span class="o">(...);</span> <span class="c1">// business logic calls to load data
</span><span class="c1"></span>
    <span class="n">Observable</span><span class="o">&lt;</span><span class="n">PartialState</span><span class="o">&gt;</span> <span class="n">nextPage</span> <span class="o">=</span> <span class="n">intent</span><span class="o">(</span><span class="n">HomeView</span><span class="o">::</span><span class="n">loadNextPageIntent</span><span class="o">)</span>
          <span class="o">.</span><span class="na">doOnNext</span><span class="o">(</span><span class="n">intent</span> <span class="o">-&gt;</span> <span class="n">Crashlytics</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&#34;Intent: load next page&#34;</span><span class="o">))</span>
          <span class="o">.</span><span class="na">flatmap</span><span class="o">(...);</span> <span class="c1">// business logic calls to load data
</span><span class="c1"></span>
    <span class="n">Observable</span><span class="o">&lt;</span><span class="n">PartialState</span><span class="o">&gt;</span> <span class="n">allIntents</span> <span class="o">=</span> <span class="n">Observable</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">loadFirstPage</span><span class="o">,</span> <span class="n">pullToRefresh</span><span class="o">,</span> <span class="n">nextPage</span><span class="o">);</span>
    <span class="n">Observable</span><span class="o">&lt;</span><span class="n">HomeViewState</span><span class="o">&gt;</span> <span class="n">stateObservable</span> <span class="o">=</span> <span class="n">allIntents</span>
          <span class="o">.</span><span class="na">scan</span><span class="o">(</span><span class="n">initialState</span><span class="o">,</span> <span class="k">this</span><span class="o">::</span><span class="n">viewStateReducer</span><span class="o">)</span> <span class="c1">// call the state reducer
</span><span class="c1"></span>          <span class="o">.</span><span class="na">doOnNext</span><span class="o">(</span><span class="n">newViewState</span> <span class="o">-&gt;</span> <span class="n">Crashlytics</span><span class="o">.</span><span class="na">log</span><span class="o">(</span> <span class="s">&#34;State: &#34;</span><span class="o">+</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">newViewState</span><span class="o">)</span> <span class="o">));</span>

    <span class="n">subscribeViewState</span><span class="o">(</span><span class="n">stateObservable</span><span class="o">,</span> <span class="n">HomeView</span><span class="o">::</span><span class="n">render</span><span class="o">);</span> <span class="c1">// display new state
</span><span class="c1"></span>  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">HomeViewState</span> <span class="nf">viewStateReducer</span><span class="o">(</span><span class="n">HomeViewState</span> <span class="n">previousState</span><span class="o">,</span> <span class="n">PartialState</span> <span class="n">changes</span><span class="o">){</span>
    <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>We simply add logging with RxJava&rsquo;s <strong>.doOnNext()</strong> operator for every intent and to the &ldquo;result&rdquo; of each intent, the view state, which then will be rendered on the view.
We serialize the view state as json (we will talk about that in a minute).</p>
<p>Now our crash report looks like this:</p>
<p><img src="/images/mvi-mosby3/crashlytics-mvi-logs.png" alt="logs"></p>
<p>Take a look at the logs: Not only we see the latest state before the crash happened but we see the full history how the user reached this state.
For better readability I have underlined the state transitions and replaced the &ldquo;data&rdquo; field (the items that are displayed in the recycler view) with <em>[&hellip;]</em> .
So the user started the app - load first page intent. Then the loading indicator is displayed <em>&ldquo;loadingFirstPage&rdquo;:true</em> and then the data has been loaded (<em>data[&hellip;]</em>).
Next the user scrolled through the list of items and reached the end of the RecyclerView which triggers a load next page intent to load more data (pagination), which causes a state transition to <em>&ldquo;loadingNextPage&rdquo;:true</em>. Once the next page is loaded the data (<em>data[&hellip;]</em>) has been updated and <em>&ldquo;loadingNextPage&rdquo;:false</em> has been set properly. The user did the same (scroll down the RecyclerView and trigger a load next page intent) for a second time.
And then he started a pull-to-refresh intent and the state transitions to <em>&ldquo;loadingPullToRefresh&rdquo;:true</em>. Suddenly the app crashes (no more logs afterwards).</p>
<p>So how does that information helps us to fix that bug?
Obviously, we know which intents the user triggered, so we can do that manually to reproduce the bug.
Moreover, we have snapshots of our app&rsquo;s state (over time) as json.
We can simply take the last state, deserialize the json and take this state as our initial state to fix that bug:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">json</span> <span class="o">=</span><span class="s">&#34;  {\&#34;data\&#34;:[...],\&#34;loadingFirstPage\&#34;:false,\&#34;loadingNextPage\&#34;:false,\&#34;loadingPullToRefresh\&#34;:false} &#34;</span><span class="o">;</span>
<span class="n">HomeViewState</span> <span class="n">stateBeforeCrash</span> <span class="o">=</span> <span class="n">gson</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">json</span><span class="o">,</span> <span class="n">HomeViewState</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">HomePresenter</span> <span class="n">homePresenter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HomePresenter</span><span class="o">(</span><span class="n">stateBeforeCrash</span><span class="o">);</span>
</code></pre></div><p>Then we attach a debugger and trigger the pull-to-refresh intent. It turns out that if the user has scrolled down the page 2 times no more data is available and our app didn&rsquo;t handled that fact properly, so that a following pull-to-refresh causes the crash.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Making app&rsquo;s state &ldquo;snapshotable&rdquo; makes the life of us developers much easier. Not only that we are able to reproduce crashes easily, furthermore, we can take the serialized state to write <a href="https://en.wikipedia.org/wiki/Regression_testing">regression tests</a> with almost zero extra costs.
Keep in mind that this is only possible if the app&rsquo;s state follows the principle of an unidirectional data flow (driven by the business logic), immutability and pure functions.
Model-View-Intent pushes us into that direction so that building &ldquo;snapshotable&rdquo; apps is a nice and useful side effect of this architecture.</p>
<p>What are the downsides of &ldquo;snapshotable&rdquo; apps? Obviously we are serializing the apps state (i.e. with Gson).
This adds some extra computation time.
In an average sized app of mine this takes about 30 milliseconds for the first time the state gets  serialized with Gson because Gson has to scan the classes by using reflections to determine the fields that have to be serialized.
Consecutive state serialization takes about 6 milliseconds on average on a Nexus 4.
Since serialization runs in <strong>.doOnNext()</strong> this typically runs on a background thread, but yes,
a user of my app has to wait 6 milliseconds more than without snapshotting to see the new state on the screen.
From my point of view that is not noticeable by an apps user.
However, an issue with snapshotting the state is that on a crash the amount of data uploaded from the users device by the crash reporting tool to his server is significant bigger.
No big deal if the user is connected over wifi, but could be an issue for the users mobile data plan.
Last but not least, you may leak sensitive user data when attaching the state to a crash report.
Either don&rsquo;t serialize sensitive data which may cause that the state attached to the crash report is not complete (and therefore almost useless) or encrypt sensitive data (which may requires some extra cpu time).</p>
<p>To sum it up: I personally see a lot of advantages in snapshotting my app, however, you may have to make some tradeoffs.
Maybe you start to enable snapshotting your app for your internal builds or beta builds to see how it works out for your app.</p>
<h3 id="bonus-time-traveling">Bonus: Time Traveling</h3>
<p>Wouldn&rsquo;t it be nice to have some kind of &ldquo;time traveling&rdquo; option during development. Maybe embedded in a debug-drawer like the one of Jake Wharton&rsquo;s u2020 demo app:</p>
<p><img src="/images/mvi-mosby3/u2020-debug-drawer.gif" alt="debug-drawer"></p>
<p>All we need in such a debug-drawer are two buttons &ldquo;previous state&rdquo; and &ldquo;next state&rdquo; so that we can step by step travel back in time from one state to previous (or next) state.
Obviously that requires some additional setup then just snapshotting our app&rsquo;s state.
For example: if we have made a HTTP request as part of a state transition we certainly don&rsquo;t want to make the real HTTP request again while time traveling because data on backend side might have  changed in the mean time.</p>
<p>Time traveling requires some kind of extra layer like a proxy at the boundary of an app so that we can &ldquo;record&rdquo; and &ldquo;replay&rdquo; things like http requests (same for sqlite database etc.).
Interested in something like that?
It seems that my friend Felipe is working on something like that for OkHttp.
Feel free to ping him to get more details about the library he is currently working on.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Would you find useful an Android library that can record and replay OkHttp network interaction for, say Espresso tests?</p>&mdash; Felipe Î»ima (@felipecsl) <a href="https://twitter.com/felipecsl/status/836380525380026368?ref_src=twsrc%5Etfw">February 28, 2017</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


    
    <div class="series-box">
        <h5>This is a post in the 
        <u>Reactive Apps with Model-View-Intent</u> series.</span></h5>
        <p>Other posts in this series:</p>

        
        
        <ul>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-1/">Reactive Apps with Model-View-Intent - Part 1: Model</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-2/">Reactive Apps with Model-View-Intent - Part 2: View and Intent</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-3/">Reactive Apps with Model-View-Intent - Part 3: State Reducer</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-4/">Reactive Apps with Model-View-Intent - Part 4: Independent UI Components</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-5/">Reactive Apps with Model-View-Intent - Part 5: Debugging with ease</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-6/">Reactive Apps with Model-View-Intent - Part 6: Restoring State</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-7/">Reactive Apps with Model-View-Intent - Part 7: Timing (SingleLiveEvent problem)</a>
            </li>
        
            <li>
                <a href="https://sockeqwe.github.io/pages/android/mosby3-mvi-8/">Reactive Apps with Model-View-Intent - Part 8: Navigation</a>
            </li>
        
        </ul>
    </div>
 

        </article>
      </div>
      
    </div>
  </div>
</section>
<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="widget">
  <h4 class="mb-4">LATEST POSTS</h4>
  
  <div class="media mb-4">
    <div class="media-body">
      <ul class="list-inline d-flex justify-content-between mb-2">
        <li class="list-inline-item">May 06, 2018</li>
      </ul>
      <h6><a class="text-dark" href="https://sockeqwe.github.io/pages/android/mosby3-mvi-8/">Reactive Apps with Model-View-Intent - Part 8: Navigation</a></h6>
    </div>
  </div>
  
  <div class="media mb-4">
    <div class="media-body">
      <ul class="list-inline d-flex justify-content-between mb-2">
        <li class="list-inline-item">May 05, 2018</li>
      </ul>
      <h6><a class="text-dark" href="https://sockeqwe.github.io/pages/android/coordinators-android/">In-App Navigation with Coordinators</a></h6>
    </div>
  </div>
  
  <div class="media mb-4">
    <div class="media-body">
      <ul class="list-inline d-flex justify-content-between mb-2">
        <li class="list-inline-item">Sep 13, 2017</li>
      </ul>
      <h6><a class="text-dark" href="https://sockeqwe.github.io/pages/android/mosby3-mvi-7/">Reactive Apps with Model-View-Intent - Part 7: Timing (SingleLiveEvent problem)</a></h6>
    </div>
  </div>
  
</div>
      </div>
    </div>
  </div>
</section>


<footer class="bg-secondary">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
              <h6>Copyright &copy; 2021 <br /> Hannes Dorfmann</h6>
              <small>Theme by themefisher.com</small>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Categories in this Blog</h6>
          
          <ul class="list-inline tag-list">
            <li class="list-inline-item m-1"><a
                href="/pages/categories/android">Android</a>
            </li>
            <li class="list-inline-item m-1"><a
                href="/pages/categories/annotation-processor">Annotation-Processor</a>
            </li>
            <li class="list-inline-item m-1"><a
                href="/pages/categories/java">Java</a>
            </li>
          </ul>

        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Tags in this Blog</h6>
          
          <ul class="list-inline tag-list">
            <li class="list-inline-item m-1"><a
                href="/pages/tags/algorithms">algorithms</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/android">android</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/database">database</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/design-patterns">design-patterns</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/java">java</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/library">library</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/navigation">navigation</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/software-architecture">software-architecture</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/ui">ui</a></li>
            <li class="list-inline-item m-1"><a
                href="/pages/tags/ux">ux</a></li>
          </ul>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Follow</h6>
          <ul class="list-inline d-inline-block">
            
            <li class="list-inline-item"><a href="" class="text-dark"><i class="ti-twitter-alt"></i></a></li>
            
            <li class="list-inline-item"><a href="" class="text-dark"><i class="ti-github"></i></a></li>
            
            <li class="list-inline-item"><a href="https://sockeqwe.github.io/pages//index.xml" class="text-dark"><i class="ti-rss"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
</footer>



<script>
  var indexURL = "https://sockeqwe.github.io/pages/index.json"
</script>


<!-- JS Plugins -->

<script src="https://sockeqwe.github.io/pages/plugins/jQuery/jquery.min.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/slick/slick.min.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/headroom/headroom.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/masonry/masonry.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/smooth-scroll/smooth-scroll.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/search/fuse.min.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/search/mark.js"></script>

<script src="https://sockeqwe.github.io/pages/plugins/search/search.js"></script>


<!-- Main Script -->

<script src="https://sockeqwe.github.io/pages/js/script.min.js"></script>

<!-- google analitycs -->

<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date(); a = s.createElement(o),
      m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'Your ID', 'auto');
  ga('send', 'pageview');
</script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
  This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button"
    class="btn btn-sm btn-outline-light ml-2">I Accept</span>
</div>
<script>
  (function ($) {
    const cookieBox = document.getElementById('js-cookie-box');
    const cookieButton = document.getElementById('js-cookie-button');
    if (!Cookies.get('cookie-box')) {
      cookieBox.classList.remove('cookie-box-hide');
      cookieButton.onclick = function () {
        Cookies.set('cookie-box', true, {
          expires:  2 
    });
    cookieBox.classList.add('cookie-box-hide');
  };
		}
	}) (jQuery);
</script>


<style>
  .cookie-box {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    text-align: center;
    z-index: 9999;
    padding: 1rem 2rem;
    background: rgb(71, 71, 71);
    transition: all .75s cubic-bezier(.19, 1, .22, 1);
    color: #fdfdfd;
  }

  .cookie-box-hide {
    display: none;
  }
</style>
</body>
</html>